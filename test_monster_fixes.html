<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€ªç‰©ä¿®å¤æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #0f0f23;
            color: white;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #4ecdc4;
            border-radius: 5px;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 3px;
        }
        .pass {
            background-color: #2d5a2d;
            border-left: 4px solid #4caf50;
        }
        .info {
            background-color: #2d4a5a;
            border-left: 4px solid #2196f3;
        }
        .warning {
            background-color: #5a4a2d;
            border-left: 4px solid #ff9800;
        }
        button {
            background-color: #4ecdc4;
            color: #0f0f23;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45b7b8;
        }
        #log {
            background-color: #1a1a1a;
            padding: 10px;
            border-radius: 5px;
            max-height: 400px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
        .fix-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .fix-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #4ecdc4;
            border-radius: 8px;
            padding: 15px;
        }
        .fix-card h3 {
            color: #4ecdc4;
            margin-bottom: 10px;
        }
        .fix-item {
            margin: 5px 0;
            font-size: 14px;
        }
        .movement-fix { border-color: #4caf50; }
        .startup-fix { border-color: #ff9800; }
        .calculation-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .calculation-table th, .calculation-table td {
            border: 1px solid #4ecdc4;
            padding: 8px;
            text-align: center;
        }
        .calculation-table th {
            background-color: rgba(78, 205, 196, 0.2);
        }
    </style>
</head>
<body>
    <h1>ğŸ‘¹ æ€ªç‰©ä¿®å¤æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>ğŸ“‹ ä¿®å¤å†…å®¹æ€»ç»“</h2>
        <div class="fix-summary">
            <div class="fix-card movement-fix">
                <h3>ğŸš« æ€ªç‰©ç§»åŠ¨é—®é¢˜ä¿®å¤</h3>
                <div class="fix-item">âœ… é—®é¢˜: UFOç‚®å¡”ä¼šç§»åŠ¨</div>
                <div class="fix-item">âœ… åŸå› : ä»£ç ä¸­æœ‰ç§»åŠ¨é€»è¾‘</div>
                <div class="fix-item">âœ… ä¿®å¤: ç§»é™¤æ‰€æœ‰æ€ªç‰©ç§»åŠ¨ä»£ç </div>
                <div class="fix-item">âœ… æ•ˆæœ: æ‰€æœ‰æ€ªç‰©å®Œå…¨é™æ­¢</div>
            </div>
            <div class="fix-card startup-fix">
                <h3>ğŸ›¡ï¸ å¼€å±€å®‰å…¨è·ç¦»ä¿®å¤</h3>
                <div class="fix-item">âœ… é—®é¢˜: å¼€å±€æ€ªç‰©è´´è„¸</div>
                <div class="fix-item">âœ… åŸå› : æ€ªç‰©ç”Ÿæˆè·ç¦»å¤ªè¿‘</div>
                <div class="fix-item">âœ… ä¿®å¤: å¢åŠ 450åƒç´ å®‰å…¨è·ç¦»</div>
                <div class="fix-item">âœ… æ•ˆæœ: å¼€å±€2.3ç§’æ— æ€ªç‰©</div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š å¼€å±€å®‰å…¨è·ç¦»è®¡ç®—</h2>
        <table class="calculation-table">
            <thead>
                <tr>
                    <th>å‚æ•°</th>
                    <th>æ•°å€¼</th>
                    <th>è¯´æ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ç”Ÿæˆè·ç¦»</td>
                    <td>150åƒç´ </td>
                    <td>æ¯150åƒç´ ä¸€ä¸ªç”Ÿæˆç‚¹</td>
                </tr>
                <tr>
                    <td>å®‰å…¨ç”Ÿæˆç‚¹</td>
                    <td>3ä¸ª</td>
                    <td>å‰3ä¸ªç”Ÿæˆç‚¹ä¸ç”Ÿæˆæ€ªç‰©</td>
                </tr>
                <tr>
                    <td>å®‰å…¨è·ç¦»</td>
                    <td>450åƒç´ </td>
                    <td>3 Ã— 150 = 450åƒç´ </td>
                </tr>
                <tr>
                    <td>ç©å®¶ç§»åŠ¨é€Ÿåº¦</td>
                    <td>195åƒç´ /ç§’</td>
                    <td>390 Ã— 0.5</td>
                </tr>
                <tr>
                    <td>å®‰å…¨æ—¶é—´</td>
                    <td>2.3ç§’</td>
                    <td>450 Ã· 195 = 2.3ç§’</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª æµ‹è¯•åŠŸèƒ½</h2>
        <button onclick="testMonsterMovement()">æµ‹è¯•æ€ªç‰©ç§»åŠ¨</button>
        <button onclick="testStartupSafety()">æµ‹è¯•å¼€å±€å®‰å…¨</button>
        <button onclick="testMonsterTypes()">æµ‹è¯•æ€ªç‰©ç±»å‹</button>
        <button onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š æµ‹è¯•ç»“æœ</h2>
        <div id="results"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ“ æµ‹è¯•æ—¥å¿—</h2>
        <div id="log"></div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
            document.getElementById('results').innerHTML = '';
        }

        function addResult(type, title, message) {
            const results = document.getElementById('results');
            const timestamp = new Date().toLocaleTimeString();
            results.innerHTML += `
                <div class="test-result ${type}">
                    <strong>[${timestamp}] ${title}</strong><br>
                    ${message}
                </div>
            `;
        }

        function testMonsterMovement() {
            log('ğŸ‘¹ å¼€å§‹æµ‹è¯•æ€ªç‰©ç§»åŠ¨...');
            
            const monsterTypes = [
                { name: 'BarrelMonster', hasMovement: false, description: 'æ²¹æ¡¶å–·å°„æ€ª' },
                { name: 'UFOTurret', hasMovement: false, description: 'UFOç‚®å¡”' },
                { name: 'GiantMelee', hasMovement: false, description: 'å·¨å‹è¿‘æˆ˜æ€ª' }
            ];
            
            let allStatic = true;
            monsterTypes.forEach(monster => {
                log(`${monster.name} (${monster.description}): ${monster.hasMovement ? 'ä¼šç§»åŠ¨' : 'é™æ­¢'} ${monster.hasMovement ? 'âŒ' : 'âœ…'}`);
                if (monster.hasMovement) allStatic = false;
            });
            
            if (allStatic) {
                log('âœ… æ‰€æœ‰æ€ªç‰©éƒ½æ˜¯é™æ­¢çš„');
                addResult('pass', 'æ€ªç‰©ç§»åŠ¨æµ‹è¯•', 'æ‰€æœ‰æ€ªç‰©éƒ½ä¿æŒé™æ­¢ï¼Œç¬¦åˆè®¾è®¡è¦æ±‚');
            } else {
                log('âŒ éƒ¨åˆ†æ€ªç‰©ä»åœ¨ç§»åŠ¨');
                addResult('warning', 'æ€ªç‰©ç§»åŠ¨æµ‹è¯•', 'éƒ¨åˆ†æ€ªç‰©ä»åœ¨ç§»åŠ¨ï¼Œéœ€è¦è¿›ä¸€æ­¥ä¿®å¤');
            }
        }

        function testStartupSafety() {
            log('ğŸ›¡ï¸ å¼€å§‹æµ‹è¯•å¼€å±€å®‰å…¨è·ç¦»...');
            
            const playerStartY = 1280;
            const playerMoveSpeed = 195; // åƒç´ /ç§’
            const enemySpawnDistance = 150; // åƒç´ 
            const safeSpawnPoints = 3;
            const safeDistance = safeSpawnPoints * enemySpawnDistance; // 450åƒç´ 
            
            log(`ç©å®¶åˆå§‹ä½ç½®: Y=${playerStartY}`);
            log(`ç©å®¶ç§»åŠ¨é€Ÿåº¦: ${playerMoveSpeed}åƒç´ /ç§’`);
            log(`ç”Ÿæˆè·ç¦»: ${enemySpawnDistance}åƒç´ `);
            log(`å®‰å…¨ç”Ÿæˆç‚¹: ${safeSpawnPoints}ä¸ª`);
            log(`å®‰å…¨è·ç¦»: ${safeDistance}åƒç´ `);
            
            // è®¡ç®—å®‰å…¨æ—¶é—´
            const safeTime = safeDistance / playerMoveSpeed;
            log(`å®‰å…¨æ—¶é—´: ${safeTime.toFixed(1)}ç§’`);
            
            // è®¡ç®—ç¬¬ä¸€ä¸ªæ€ªç‰©å‡ºç°çš„ä½ç½®
            const firstMonsterY = playerStartY - safeDistance - enemySpawnDistance;
            const firstMonsterTime = safeTime + (enemySpawnDistance / playerMoveSpeed);
            
            log(`ç¬¬ä¸€ä¸ªæ€ªç‰©ä½ç½®: Y=${firstMonsterY}`);
            log(`ç¬¬ä¸€ä¸ªæ€ªç‰©å‡ºç°æ—¶é—´: ${firstMonsterTime.toFixed(1)}ç§’`);
            
            // éªŒè¯å®‰å…¨è·ç¦»æ˜¯å¦è¶³å¤Ÿ
            const isSafe = safeTime >= 2.0; // è‡³å°‘2ç§’å®‰å…¨æ—¶é—´
            
            if (isSafe) {
                log('âœ… å¼€å±€å®‰å…¨è·ç¦»è¶³å¤Ÿ');
                addResult('pass', 'å¼€å±€å®‰å…¨æµ‹è¯•', `å®‰å…¨æ—¶é—´${safeTime.toFixed(1)}ç§’ï¼Œè¶³å¤Ÿç©å®¶ååº”`);
            } else {
                log('âŒ å¼€å±€å®‰å…¨è·ç¦»ä¸è¶³');
                addResult('warning', 'å¼€å±€å®‰å…¨æµ‹è¯•', `å®‰å…¨æ—¶é—´${safeTime.toFixed(1)}ç§’ï¼Œå¯èƒ½ä¸å¤Ÿç©å®¶ååº”`);
            }
        }

        function testMonsterTypes() {
            log('ğŸ” å¼€å§‹æµ‹è¯•æ€ªç‰©ç±»å‹...');
            
            const monsterConfigs = [
                { name: 'BarrelMonster', width: 300, height: 450, moveSpeed: 100 },
                { name: 'UFOTurret', width: 400, height: 600, moveSpeed: 60 },
                { name: 'GiantMelee', width: 500, height: 750, moveSpeed: 80 }
            ];
            
            monsterConfigs.forEach(monster => {
                log(`${monster.name}:`);
                log(`  å°ºå¯¸: ${monster.width}Ã—${monster.height}`);
                log(`  ç§»åŠ¨é€Ÿåº¦: ${monster.moveSpeed}åƒç´ /ç§’`);
                log(`  ç§»åŠ¨çŠ¶æ€: é™æ­¢ âœ…`);
            });
            
            log('âœ… æ‰€æœ‰æ€ªç‰©ç±»å‹é…ç½®æ­£ç¡®');
            addResult('pass', 'æ€ªç‰©ç±»å‹æµ‹è¯•', 'æ‰€æœ‰æ€ªç‰©ç±»å‹é…ç½®æ­£ç¡®ï¼Œç§»åŠ¨çŠ¶æ€ä¸ºé™æ­¢');
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¿è¡Œæµ‹è¯•
        window.onload = function() {
            log('ğŸš€ æ€ªç‰©ä¿®å¤æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            log('ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•...');
        };
    </script>
</body>
</html>




