<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­å¼¹æ—¶é—´æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #0f0f23;
            color: white;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #4ecdc4;
            border-radius: 5px;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 3px;
        }
        .pass {
            background-color: #2d5a2d;
            border-left: 4px solid #4caf50;
        }
        .info {
            background-color: #2d4a5a;
            border-left: 4px solid #2196f3;
        }
        .warning {
            background-color: #5a4a2d;
            border-left: 4px solid #ff9800;
        }
        button {
            background-color: #4ecdc4;
            color: #0f0f23;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45b7b8;
        }
        #log {
            background-color: #1a1a1a;
            padding: 10px;
            border-radius: 5px;
            max-height: 400px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
        .calculation-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .calculation-table th, .calculation-table td {
            border: 1px solid #4ecdc4;
            padding: 8px;
            text-align: center;
        }
        .calculation-table th {
            background-color: rgba(78, 205, 196, 0.2);
        }
    </style>
</head>
<body>
    <h1>ğŸ”« å­å¼¹æ—¶é—´æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>ğŸ“Š é—®é¢˜åˆ†æ</h2>
        <div class="test-result info">
            <strong>é—®é¢˜æè¿°:</strong> æ¸¸æˆæ—¶é—´32ç§’å·¦å³ï¼Œå­å¼¹å˜çŸ­æ¶ˆå¤±<br>
            <strong>æ ¹æœ¬åŸå› :</strong> ç©å®¶å‘ä¸Šç§»åŠ¨ï¼ŒYåæ ‡å˜å°ï¼Œå­å¼¹è¾¹ç•Œæ£€æŸ¥å¤±æ•ˆ<br>
            <strong>ä¿®å¤æ–¹æ¡ˆ:</strong> æ‰©å¤§å­å¼¹è¾¹ç•Œæ£€æŸ¥èŒƒå›´
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ§® è®¡ç®—åˆ†æ</h2>
        <table class="calculation-table">
            <thead>
                <tr>
                    <th>æ—¶é—´</th>
                    <th>ç©å®¶Yä½ç½®</th>
                    <th>å­å¼¹Yä½ç½®</th>
                    <th>è¾¹ç•Œæ£€æŸ¥</th>
                    <th>ç»“æœ</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>0ç§’</td>
                    <td>1280</td>
                    <td>1280</td>
                    <td>1280 > -5000</td>
                    <td>âœ… å­˜æ´»</td>
                </tr>
                <tr>
                    <td>10ç§’</td>
                    <td>-670</td>
                    <td>-670</td>
                    <td>-670 > -5000</td>
                    <td>âœ… å­˜æ´»</td>
                </tr>
                <tr>
                    <td>20ç§’</td>
                    <td>-2620</td>
                    <td>-2620</td>
                    <td>-2620 > -5000</td>
                    <td>âœ… å­˜æ´»</td>
                </tr>
                <tr>
                    <td>32ç§’</td>
                    <td>-4960</td>
                    <td>-4960</td>
                    <td>-4960 > -5000</td>
                    <td>âš ï¸ æ¥è¿‘è¾¹ç•Œ</td>
                </tr>
                <tr>
                    <td>35ç§’</td>
                    <td>-5425</td>
                    <td>-5425</td>
                    <td>-5425 < -5000</td>
                    <td>âŒ é”€æ¯</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ ä¿®å¤æ–¹æ¡ˆ</h2>
        <div class="test-result pass">
            <strong>ä¿®å¤å‰:</strong> å­å¼¹è¾¹ç•Œ -5000åƒç´ <br>
            <strong>ä¿®å¤å:</strong> å­å¼¹è¾¹ç•Œ -10000åƒç´ <br>
            <strong>æ•ˆæœ:</strong> å­å¼¹å°„ç¨‹å¢åŠ ä¸€å€ï¼Œå¯ä»¥æ”¯æŒæ›´é•¿æ—¶é—´çš„æ¸¸æˆ
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª æµ‹è¯•åŠŸèƒ½</h2>
        <button onclick="testBulletTiming()">æµ‹è¯•å­å¼¹æ—¶é—´</button>
        <button onclick="testBoundaryCalculation()">æµ‹è¯•è¾¹ç•Œè®¡ç®—</button>
        <button onclick="simulateGameTime()">æ¨¡æ‹Ÿæ¸¸æˆæ—¶é—´</button>
        <button onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š æµ‹è¯•ç»“æœ</h2>
        <div id="results"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ“ æµ‹è¯•æ—¥å¿—</h2>
        <div id="log"></div>
    </div>

    <script>
        // æ¸¸æˆå‚æ•°
        const PLAYER_START_Y = 1280;
        const PLAYER_MOVE_SPEED = 195; // 390 * 0.5
        const BULLET_SPEED = 800;
        const OLD_BOUNDARY = -5000;
        const NEW_BOUNDARY = -10000;

        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
            document.getElementById('results').innerHTML = '';
        }

        function addResult(type, title, message) {
            const results = document.getElementById('results');
            const timestamp = new Date().toLocaleTimeString();
            results.innerHTML += `
                <div class="test-result ${type}">
                    <strong>[${timestamp}] ${title}</strong><br>
                    ${message}
                </div>
            `;
        }

        function testBulletTiming() {
            log('ğŸ”« å¼€å§‹æµ‹è¯•å­å¼¹æ—¶é—´...');
            
            const testTimes = [0, 10, 20, 30, 32, 35, 40, 50];
            
            testTimes.forEach(time => {
                const playerY = PLAYER_START_Y - (PLAYER_MOVE_SPEED * time);
                const bulletY = playerY; // å­å¼¹ä»ç©å®¶ä½ç½®å‘å°„
                
                // æµ‹è¯•æ—§è¾¹ç•Œ
                const oldResult = bulletY > OLD_BOUNDARY ? 'å­˜æ´»' : 'é”€æ¯';
                // æµ‹è¯•æ–°è¾¹ç•Œ
                const newResult = bulletY > NEW_BOUNDARY ? 'å­˜æ´»' : 'é”€æ¯';
                
                log(`${time}ç§’: ç©å®¶Y=${playerY.toFixed(0)}, å­å¼¹Y=${bulletY.toFixed(0)}`);
                log(`  æ—§è¾¹ç•Œ(${OLD_BOUNDARY}): ${oldResult} | æ–°è¾¹ç•Œ(${NEW_BOUNDARY}): ${newResult}`);
            });
            
            log('âœ… å­å¼¹æ—¶é—´æµ‹è¯•å®Œæˆ');
            addResult('info', 'å­å¼¹æ—¶é—´æµ‹è¯•', 'è¯¦ç»†æ—¶é—´åˆ†æå®Œæˆï¼Œè¯·æŸ¥çœ‹æ—¥å¿—');
        }

        function testBoundaryCalculation() {
            log('ğŸ§® å¼€å§‹æµ‹è¯•è¾¹ç•Œè®¡ç®—...');
            
            // è®¡ç®—å­å¼¹èƒ½å­˜æ´»å¤šé•¿æ—¶é—´
            const oldMaxTime = Math.abs(OLD_BOUNDARY - PLAYER_START_Y) / PLAYER_MOVE_SPEED;
            const newMaxTime = Math.abs(NEW_BOUNDARY - PLAYER_START_Y) / PLAYER_MOVE_SPEED;
            
            log(`æ—§è¾¹ç•Œæœ€å¤§å­˜æ´»æ—¶é—´: ${oldMaxTime.toFixed(1)}ç§’`);
            log(`æ–°è¾¹ç•Œæœ€å¤§å­˜æ´»æ—¶é—´: ${newMaxTime.toFixed(1)}ç§’`);
            log(`æ—¶é—´å¢åŠ : ${(newMaxTime - oldMaxTime).toFixed(1)}ç§’`);
            
            // è®¡ç®—å­å¼¹å°„ç¨‹
            const oldRange = oldMaxTime * BULLET_SPEED;
            const newRange = newMaxTime * BULLET_SPEED;
            
            log(`æ—§è¾¹ç•Œå­å¼¹å°„ç¨‹: ${oldRange.toFixed(0)}åƒç´ `);
            log(`æ–°è¾¹ç•Œå­å¼¹å°„ç¨‹: ${newRange.toFixed(0)}åƒç´ `);
            log(`å°„ç¨‹å¢åŠ : ${(newRange - oldRange).toFixed(0)}åƒç´ `);
            
            const improvement = ((newMaxTime - oldMaxTime) / oldMaxTime * 100).toFixed(1);
            log(`æ€§èƒ½æå‡: ${improvement}%`);
            
            addResult('pass', 'è¾¹ç•Œè®¡ç®—', 
                `æœ€å¤§å­˜æ´»æ—¶é—´: ${oldMaxTime.toFixed(1)}ç§’ â†’ ${newMaxTime.toFixed(1)}ç§’ (æå‡${improvement}%)`);
        }

        function simulateGameTime() {
            log('ğŸ® å¼€å§‹æ¨¡æ‹Ÿæ¸¸æˆæ—¶é—´...');
            
            let time = 0;
            let playerY = PLAYER_START_Y;
            let bulletCount = 0;
            let destroyedBullets = 0;
            
            // æ¨¡æ‹Ÿ60ç§’æ¸¸æˆ
            while (time <= 60) {
                playerY = PLAYER_START_Y - (PLAYER_MOVE_SPEED * time);
                
                // æ¯ç§’å‘å°„å­å¼¹
                if (time % 1 === 0) {
                    bulletCount++;
                    const bulletY = playerY;
                    
                    // æ£€æŸ¥å­å¼¹æ˜¯å¦ä¼šè¢«é”€æ¯
                    if (bulletY <= NEW_BOUNDARY) {
                        destroyedBullets++;
                        if (time === 32) {
                            log(`âš ï¸ 32ç§’æ—¶: ç©å®¶Y=${playerY.toFixed(0)}, å­å¼¹Y=${bulletY.toFixed(0)}`);
                        }
                    }
                }
                
                time += 0.1; // 0.1ç§’æ­¥è¿›
            }
            
            log(`æ¨¡æ‹Ÿå®Œæˆ: æ€»å­å¼¹${bulletCount}ä¸ª, é”€æ¯${destroyedBullets}ä¸ª`);
            log(`é”€æ¯ç‡: ${(destroyedBullets / bulletCount * 100).toFixed(1)}%`);
            
            if (destroyedBullets === 0) {
                log('âœ… æ‰€æœ‰å­å¼¹éƒ½èƒ½æ­£å¸¸å­˜æ´»');
                addResult('pass', 'æ¸¸æˆæ¨¡æ‹Ÿ', '60ç§’å†…æ‰€æœ‰å­å¼¹éƒ½èƒ½æ­£å¸¸å­˜æ´»');
            } else {
                log(`âŒ æœ‰${destroyedBullets}ä¸ªå­å¼¹è¢«é”€æ¯`);
                addResult('warning', 'æ¸¸æˆæ¨¡æ‹Ÿ', `${destroyedBullets}ä¸ªå­å¼¹è¢«é”€æ¯ï¼Œéœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–`);
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¿è¡Œæµ‹è¯•
        window.onload = function() {
            log('ğŸš€ å­å¼¹æ—¶é—´æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            log('ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•...');
        };
    </script>
</body>
</html>




